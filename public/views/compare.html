<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation" style="border: none;">
		<div class="container">

			<div class="navbar-header">
		      <button type="button" class="navbar-toggle" ng-click="isCollapsed = !isCollapsed">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
				<a href="/" class="navbar-brand">phruma</a>
			</div>

			<div class="collapse navbar-collapse" collapse="isCollapsed">
				<ul class="nav navbar-nav navbar-right">
					<li>
						<div class="navbar-form small_search">
							<div class="input-group">
								<input type="text" ng-model="query" class="small_searchbar form-control" placeholder="Search" ng-keypress="pressEnter($event, query, 'search')">
								<span class="input-group-btn">
									<button class="btn btn-default small_searchbar_button" type="button" ng-click="doSearch(query)"><span class="glyphicon glyphicon-search"></span></button>
								</span>
							</div>
						</div>
					</li>
					<li ng-show="!getAuthen()"><a ng-click="openModal('lg','signup')">Register</a></li>
					<li ng-show="!getAuthen()"><button class="btn btn-default navbar-btn" ng-click="openModal('md','login')">Login</button></li>
					<li ng-show="getAuthen()" ng-click="goToWatchList()"s><p id="welcome_message">{{message}}</p></li>
					<li ng-show="getAuthen()"><button class="btn btn-default navbar-btn" ng-click="goToWatchList()">My Watchlist</button></li>
					<li ng-show="getAuthen()"><button class="btn btn-default navbar-btn" ng-click="openModal('md','logout')">Logout</button></li>
				</ul>
			</div>
		</div>
</nav>

<div ng-hide="errorMessage == ''" class="text-center" style="padding-top: 300px">
		<h3>{{ errorMessage }}</h3>
</div>

<div ng-init="compareInit()" id="result_container" ng-hide="movieQuery == ''">

	<div id="compare_results">
		<div id="compare_movie_info" class="row">
			<!-- MOVIE 1 -->
			<div class="col-md-6">
				<div class="row" id="movie_info">
					<div class="movie_info_wrapper">
						<div class="movieinfo-left col-xs-12">
							<p class="movie_poster">
								<img src="http://imdb.wemakesites.net/api/1.0/img/?url={{ poster }}" style="width: 100%; max-width: 300px;" onerror="this.src = '/css/movie-placeholder.jpg'">
								<button class="btn btn_red btn-block btn-lg" type="button" ng-click="addToWatchList()" ng-show="!checkbutton()"><span class="glyphicon glyphicon-eye-open" style="margin-right: 5px; top: 2px;"></span> Add to Watchlist</button>
								<button class="btn btn_red btn-block btn-lg" type="button" ng-click="removeFromWatchList(movieIMDBid, 'normal')" ng-show="checkbutton()"><span class="glyphicon glyphicon-eye-close" style="margin-right: 5px; top: 2px;"></span> Remove from Watchlist</button>							
							</p>


						</div>
						<div class="movieinfo-right col-xs-12 ">
							<h2 class="highlight movie_title">{{ movieTitle }} <small class="movie_year">(<span ng-repeat="country in countries">{{country}}{{$last ? '' : ', '}}</span> {{ movieYear }})</small></h2>				

							<div class="links_container">
								<a ng-hide="!trailerURL" class="movie_link" href="{{ trailerURL }}" target="_blank"><span class="glyphicon glyphicon-film"></span>Trailer</a>
								<a ng-hide="!movieIMDBurl" class="movie_link" href="{{ movieIMDBurl }}" target="_blank"><span class="glyphicon glyphicon-link"></span>IMDB</a>
								<a ng-hide="!movieRTlink" class="movie_link" href="{{ movieRTlink }}" target="_blank"><span class="glyphicon glyphicon-link"></span>Rotten Tomatoes</a>
							</div>

							<p><b>Plot</b></p>

							<div id="plot_container">
								<p ng-hide="showPlot">{{ moviePlot }} <a ng-click="showFullPlot()">Full Plot</a></p>
								<p ng-show="showPlot">{{ moviePlotFull }} <a ng-click="showFullPlot()">Short Plot</a></p>
							</div>

							<hr>
							<div id="meta_container">
								<p ng-hide="!genres"><b>Genre: </b><span ng-repeat="genre in genres">{{genre}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!movieStudio"><b>Studio: </b>{{movieStudio}}</p>
								<p ng-hide="!movieRuntime"><b>Runtime: </b>{{movieRuntime}}</p>
								<p ng-hide="!movieAgeRating"><b>Age Rating: </b>{{movieAgeRating}}</p>
								<p><b>Starring: </b><span style="cursor:pointer" popover="{{'As ' + actor.character}}" popover-trigger="mouseenter" ng-repeat="actor in movieActors|limitTo:10">{{actor.actorName}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!hasDirectors"><b>Directed By: </b><span ng-repeat="director in movieDirectors">{{director.name}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!hasWriters"><b>Written By: </b><span ng-repeat="writer in movieWriters">{{writer.name}}{{$last ? '' : ', '}}</span></p>
							</div>

						</div>

					</div>

				</div>
			</div>

			<!-- MOVIE 2 (COMPARISON) -->
			<div class="col-md-6">
				<div class="row" id="movie_info">
					<div class="movie_info_wrapper">
						<div class="movieinfo-left col-xs-12">
							<p class="movie_poster">
								<img src="http://imdb.wemakesites.net/api/1.0/img/?url={{ poster_compare }}" style="width: 100%; max-width: 300px;" onerror="this.src = '/css/movie-placeholder.jpg'">
								<button class="btn btn_red btn-block btn-lg" type="button" ng-click="addToWatchList('compare')" ng-show="!checkbutton_compare()"><span class="glyphicon glyphicon-eye-open" style="margin-right: 5px; top: 2px;"></span> Add to Watchlist</button>
								<button class="btn btn_red btn-block btn-lg" type="button" ng-click="removeFromWatchList(movieIMDBid_compare, 'compare')" ng-show="checkbutton_compare()"><span class="glyphicon glyphicon-eye-close" style="margin-right: 5px; top: 2px;"></span> Remove from Watchlist</button>
							</p>


						</div>
						<div class="movieinfo-right col-xs-12 ">
							<h2 class="highlight movie_title">{{ movieTitle_compare }} <small class="movie_year">(<span ng-repeat="country in countries_compare">{{country}}{{$last ? '' : ', '}}</span> {{ movieYear_compare }})</small></h2>				

							<div class="links_container">
								<a ng-hide="!trailerURL_compare" class="movie_link" href="{{ trailerURL_compare }}" target="_blank"><span class="glyphicon glyphicon-film"></span>Trailer</a>
								<a ng-hide="!movieIMDBurl_compare" class="movie_link" href="{{ movieIMDBurl_compare }}" target="_blank"><span class="glyphicon glyphicon-link"></span>IMDB</a>
								<a ng-hide="!movieRTlink_compare" class="movie_link" href="{{ movieRTlink_compare }}" target="_blank"><span class="glyphicon glyphicon-link"></span>Rotten Tomatoes</a>
							</div>

							<p><b>Plot</b></p>

							<div id="plot_container">
								<p ng-hide="showPlot_compare">{{ moviePlot_compare }} <a ng-click="showFullPlot('compare')">Full Plot</a></p>
								<p ng-show="showPlot_compare">{{ moviePlotFull_compare }} <a ng-click="showFullPlot('compare')">Short Plot</a></p>
							</div>

							<hr>
							<div id="meta_container">
								<p ng-hide="!genres_compare"><b>Genre: </b><span ng-repeat="genre in genres_compare">{{genre}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!movieStudio_compare"><b>Studio: </b>{{movieStudio_compare}}</p>
								<p ng-hide="!movieRuntime_compare"><b>Runtime: </b>{{movieRuntime}}</p>
								<p ng-hide="!movieAgeRating_compare"><b>Age Rating: </b>{{movieAgeRating}}</p>
								<p><b>Starring: </b><span style="cursor:pointer" popover="{{'As ' + actor.character}}" popover-trigger="mouseenter" ng-repeat="actor in movieActors_compare|limitTo:10">{{actor.actorName}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!hasDirectors_compare"><b>Directed By: </b><span ng-repeat="director in movieDirectors_compare">{{director.name}}{{$last ? '' : ', '}}</span></p>
								<p ng-hide="!hasWriters_compare"><b>Written By: </b><span ng-repeat="writer in movieWriters_compare">{{writer.name}}{{$last ? '' : ', '}}</span></p>
							</div>

						</div>

					</div>
				</div>
			</div>
		</div>
		<div id="moviedata-container" class="row">
			<div class="movieratings_wrapper">

					<!-- FILL KNOBS WITH RATINGS -->
				<div style="display: none">
					<input type="text" value="N/A" class="knob" ng-model="IMDBRating"/>
					<input type="text" value="N/A" class="knob" ng-model="movieCriticsRating"/>
					<input type="text" value="N/A" class="knob" ng-model="movieUsersRating"/>
					<input type="text" value="N/A" class="knob" ng-model="IMDBRating_compare"/>
					<input type="text" value="N/A" class="knob" ng-model="movieCriticsRating_compare"/>
					<input type="text" value="N/A" class="knob" ng-model="movieUsersRating_compare"/>
				</div>	

				<carousel>
					<slide class="ratings_slide"active="slide.active">
						<h2 class="area_title" style="margin-top: 0; text-align: left; margin-left: 15px;">{{movieTitle}} Ratings</h2>
						<div class="col-md-4" ng-class="bothHaveRTrating ? '' : 'series_knob'">
								<div class="knob_container">
										<input type="text" value="N/A" class="knob" ng-model="IMDBRating"/>
									<p>IMDB</p>
								</div>
						</div>
						<div class="col-md-4" ng-show="bothHaveRTrating">
							<div class="knob_container">
								<input type="text" value="N/A" class="knob" ng-model="movieCriticsRating"/>
								<p>Rotten Tomatoes Critics</p>
							</div>
						</div>
						<div class="col-md-4" ng-show="bothHaveRTrating">
							<div class="knob_container">
								<input type="text" value="N/A" class="knob" ng-model="movieUsersRating"/>
								<p>Rotten Tomatoes Audience</p>
							</div>
						</div>					
				    </slide>

					<slide class="ratings_slide">
						<h2 class="area_title" style="margin-top: 0; text-align: left; margin-left: 15px;">{{movieTitle_compare}} Ratings</h2>
						<div class="col-md-4" ng-class="bothHaveRTrating ? '' : 'series_knob'">
								<div class="knob_container">
										<input type="text" value="N/A" class="knob" ng-model="IMDBRating_compare"/>
									<p>IMDB</p>
								</div>
						</div>
						<div class="col-md-4" ng-show="bothHaveRTrating">
							<div class="knob_container">
								<input type="text" value="N/A" class="knob" ng-model="movieCriticsRating_compare"/>
								<p>Rotten Tomatoes Critics</p>
							</div>
						</div>
						<div class="col-md-4" ng-show="bothHaveRTrating">
							<div class="knob_container">
								<input type="text" value="N/A" class="knob" ng-model="movieUsersRating_compare"/>
								<p>Rotten Tomatoes Audience</p>
							</div>
						</div>					
				    </slide>
				</carousel>
			</div>					
		</div>

		<div id="similar_and_critics" class="row" ng-show="bothMovie">
			<h2 class="area_title" style="margin-left: 15px; margin-bottom: 0">What The Critics Say About</h2>
			<div class="col-md-6 critics_container" ng-show="hasReviews">

				<h3 class="area_title" style="margin-bottom: 15px; font-size: 30px;">{{movieTitle}}</h3>

				<carousel>
					<slide class="similar_movie" ng-repeat="review in criticReviews" active="slide.active" ng-if="review.quote !== ''">
						<div class="col-sm-12 review_content">
							<h3 class="highlight similar_movie_title">{{review.critic}}</h3>
							<h4>{{review.publication}}</h4>
							<span ng-show="review.freshness == 'fresh'" class="glyphicon glyphicon-thumbs-up critic_freshness"></span>
							<span ng-show="review.freshness == 'rotten'" class="glyphicon glyphicon-thumbs-down critic_freshness"></span>
							<p>{{"„" + review.quote + "“"}}</p>
							<p><a href="{{review.links.review}}" target="_blank">Read Full Review</a></p>
						</div>


				    </slide>
				</carousel>
			</div>
			<div class="col-md-6 critics_container" ng-show="hasReviews_compare">
				<h3 class="area_title" style=" margin-bottom: 15px; font-size: 30px;">{{movieTitle_compare}}</h3>

				<carousel>
					<slide class="similar_movie" ng-repeat="review in criticReviews_compare" active="slide.active" ng-if="review.quote !== ''">
						<div class="col-sm-12 review_content">
							<h3 class="highlight similar_movie_title">{{review.critic}}</h3>
							<h4>{{review.publication}}</h4>
							<span ng-show="review.freshness == 'fresh'" class="glyphicon glyphicon-thumbs-up critic_freshness"></span>
							<span ng-show="review.freshness == 'rotten'" class="glyphicon glyphicon-thumbs-down critic_freshness"></span>
							<p>{{"„" + review.quote + "“"}}</p>
							<p><a href="{{review.links.review}}" target="_blank">Read Full Review</a></p>
						</div>


				    </slide>
				</carousel>
			</div>
		</div>	

		<div id="series_container" class="row" ng-hide="bothMovie">
			<h2 class="area_title" style="margin-left: 15px; margin-bottom: 0;">Seasons & Episodes</h2>
			<div class="col-sm-6" ng-hide="isMovie">		
				<h3 class="area_title" style=" margin-bottom: 15px; font-size: 30px;">{{movieTitle}}</h3>	
				<tabset vertical="true" type="pills">
				    <tab heading="Season {{season.numSeason}}" ng-repeat="season in seriesSeasons">
						<carousel>
							<slide class="similar_movie episodes" ng-repeat="episode in season.episodes" active="slide.active">
								<div class="col-sm-12">
									<h3 class="highlight similar_movie_title">{{episode.title}}</h3>
									<h4 class="episode_number">{{"Episode " + episode.episode}}</h4>
									<p class="episode_plot" ng-if="episode.plot !== 'Add a Plot'">{{episode.plot}}</p>
									<p class="episode_plot" ng-if="episode.plot == 'Add a Plot'">Unfortunately no Plot has been added for this episode.</p>
								</div>
						    </slide>
						</carousel>
				    </tab>
				</tabset>
			</div>
			<div class="col-sm-6" ng-hide="isMovie_compare">
				<h3 class="area_title" style=" margin-bottom: 15px; font-size: 30px;">{{movieTitle_compare}}</h3>				
				<tabset vertical="true" type="pills">
				    <tab heading="Season {{season.numSeason}}" ng-repeat="season in seriesSeasons_compare">
						<carousel>
							<slide class="similar_movie episodes" ng-repeat="episode in season.episodes" active="slide.active">
								<div class="col-sm-12">
									<h3 class="highlight similar_movie_title">{{episode.title}}</h3>
									<h4 class="episode_number">{{"Episode " + episode.episode}}</h4>
									<p class="episode_plot" ng-if="episode.plot !== 'Add a Plot'">{{episode.plot}}</p>
									<p class="episode_plot" ng-if="episode.plot == 'Add a Plot'">Unfortunately no Plot has been added for this episode.</p>
								</div>
						    </slide>
						</carousel>
				    </tab>
				</tabset>
			</div>			
		</div>

		<div id="business_container" class="row" ng-show="bothHaveBudget">
			<div class="col-md-12">
				<h2 class="area_title">Business & Money</h2>
				<p class="budget_p" ng-hide="!movieBudget">{{movieTitle}} had a Budget of <span class="budget">{{movieBudget}}</span></p>
				<p class="budget_p" ng-hide="!movieBudget_compare">{{movieTitle_compare}} had a Budget of <span class="budget">{{movieBudget_compare}}</span></p>

		        <highchart ng-show="bothHaveGross" id="chart1" config="chartConfig"></highchart>
		    </div>
		</div>
	</div>

</div>




<!-- LOGIN MODAL -->
<div id="login_modal">
    <script type="text/ng-template" id="myLoginModal.html">
        <div class="modal-header">
            <h3 class="modal-title">Sign in to your Account</h3>
        </div>
        <div class="modal-body">
        <form ng-show="!isAuthenticated" ng-submit="login(username,password)">
        	<div class="row">
        		<div class="col-md-3">Username/E-Mail:</div>
        		<div class="col-md-9"><input class="form-control" type="text" ng-model="username" placeholder="Username"></div>
        	</div>
        	<div class="row">
        		<div class="col-md-3">Password:</div>
        		<div class="col-md-9"><input class="form-control" type="password" ng-model="password" placeholder="Password"></div>
        	</div>        	
        <div class="modal-footer">
                <div class="pull-left errorMessage">{{message}}</div>                   
                <button type="submit" class="btn btn-default modal-btn-login" ng-click="doLogin()">Login</button>
                <button class="btn btn-default modal-btn-close" type ="button"ng-click="cancel()">Close</button>
            </div>
        	</form>
        </div>
    </script>
</div>


<div id="signup_modal">
    <script type="text/ng-template" id="mySignUpModal.html">
        <div class="modal-header">
            <h3 class="modal-title">Register</h3>
        </div>
        <div class="modal-body">
        <form  ng-submit="signup(newuser)">
            <div class="row">
                <div class="col-md-5">Username:</div>
                <div class="col-md-5"><input class="form-control" type="text" ng-model="newuser.username" placeholder="Username"></div>
            </div>
            <div class="row">
                <div class="col-md-5">E-Mail:</div>
                <div class="col-md-5"><input class="form-control" type="text" ng-model="newuser.email" placeholder="E-Mail"></div>
            </div>
            <div class="row">
                <div class="col-md-5">Password:</div>
                <div class="col-md-5"><input class="form-control" type="password" ng-model="newuser.password" placeholder="Password"></div>
            </div>
            <div class="row">
                <div class="col-md-5">Confirm password:</div>
                <div class="col-md-5"><input class="form-control" type="password" ng-model="newuser.passwordconfirm" placeholder="Confirm Password"></div>
            </div> 
        <div class="modal-footer">
            <div class="pull-left errorMessage">{{message}}</div>  
            <button class="btn btn-default modal-btn-login"  type="submit" >Register</button>
            <button class="btn btn-default modal-btn-close" type="button" ng-click="cancel()">Close</button>  
            </form>
        </div>
    </script>
</div>

<div id="confirmLogout_modal">
    <script type="text/ng-template" id="confirmLogoutModal.html">
        <div class="modal-body" style="text-align: center">

            <h4>Are you sure you want to logout?</h4>
            <div class="row">
                <div class="col-md-12">
                <button type="submit" class="btn btn-default modal-btn-login" ng-click="logout()">Logout</button>
                <button class="btn btn-default modal-btn-close" type="button" ng-click="cancel()">Close</button>
                </div>
            </div>
        </div>
    </script>
</div>

<div id="notloggedin_modal">
    <script type="text/ng-template" id="myNotLoggedInModal.html">
        <div class="modal-body" style="text-align: center">
        	<h4>You need to register/login before you can add things to your Watchlist</h4>
        </div>
    </script>
</div>